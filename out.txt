
> asbestosguard@0.0.0 test:real-agent
> tsx test-real-agent.ts

[dotenv@17.2.3] injecting env (11) from .env.local -- tip: ΓÜÖ∩╕Å  write to custom object with { processEnv: myObject }
[tracing-setup] Loading OpenTelemetry tracing...
Current logger will be overwritten from Error
    at DiagAPI.setLogger (C:\DEV\AsbestosGuard\node_modules\@opentelemetry\api\src\api\diag.ts:97:23)
    at new NodeSDK (C:\DEV\AsbestosGuard\node_modules\@opentelemetry\sdk-node\src\sdk.ts:254:12)
    at useAzureMonitor (C:\DEV\AsbestosGuard\node_modules\@azure\monitor-opentelemetry\src\index.ts:111:9)
    at <anonymous> (C:\DEV\AsbestosGuard\services\tracing-setup.ts:35:5) []
Current logger will overwrite one already registered from Error
    at DiagAPI.setLogger (C:\DEV\AsbestosGuard\node_modules\@opentelemetry\api\src\api\diag.ts:97:23)
    at new NodeSDK (C:\DEV\AsbestosGuard\node_modules\@opentelemetry\sdk-node\src\sdk.ts:254:12)
    at useAzureMonitor (C:\DEV\AsbestosGuard\node_modules\@azure\monitor-opentelemetry\src\index.ts:111:9)
    at <anonymous> (C:\DEV\AsbestosGuard\services\tracing-setup.ts:35:5)
@opentelemetry/api: Registered a global for diag v1.9.0.
@opentelemetry/api: Registered a global for context v1.9.0.
@opentelemetry/api: Registered a global for propagation v1.9.0.
EnvDetector found resource. ResourceImpl {
  _rawAttributes: [],
  _asyncAttributesPending: false,
  _schemaUrl: undefined,
  _memoizedAttributes: undefined
}
HostDetector found resource. ResourceImpl {
  _rawAttributes: [
    [ 'host.name', 'NEWDELL' ],
    [ 'host.arch', 'amd64' ],
    [ 'host.id', [Promise] ]
  ],
  _asyncAttributesPending: true,
  _schemaUrl: undefined,
  _memoizedAttributes: undefined
}
OSDetector found resource. ResourceImpl {
  _rawAttributes: [ [ 'os.type', 'windows' ], [ 'os.version', '10.0.26220' ] ],
  _asyncAttributesPending: false,
  _schemaUrl: undefined,
  _memoizedAttributes: undefined
}
@opentelemetry/api: Registered a global for trace v1.9.0.
@opentelemetry/api: Registered a global for metrics v1.9.0.
[tracing-setup] Γ£à Azure Monitor OpenTelemetry initialized
[tracing-setup]    Connection: InstrumentationKey=aecf304b-fd07-48e9-9132-92...
[tracing-setup]    Export interval: 500ms
[tracing-setup]    Test span started
[tracing-setup]    Test span attribute set
Accessing resource attributes before async attributes settled
Unsettled resource attribute host.id skipped
Accessing resource attributes before async attributes settled
Unsettled resource attribute host.id skipped
Accessing resource attributes before async attributes settled
Unsettled resource attribute host.id skipped
Accessing resource attributes before async attributes settled
Unsettled resource attribute host.id skipped
Accessing resource attributes before async attributes settled
Unsettled resource attribute host.id skipped
Accessing resource attributes before async attributes settled
Unsettled resource attribute host.id skipped
Accessing resource attributes before async attributes settled
Unsettled resource attribute host.id skipped
Accessing resource attributes before async attributes settled
Unsettled resource attribute host.id skipped
Accessing resource attributes before async attributes settled
Unsettled resource attribute host.id skipped
Accessing resource attributes before async attributes settled
Unsettled resource attribute host.id skipped
[tracing-setup]    Test span ended
[tracing-setup]    Test span created to verify tracing
[dotenv@17.2.3] injecting env (0) from .env.local -- tip: Γ£à audit secrets and track compliance: https://dotenvx.com/ops
ΓòöΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòù
Γòæ          PROOF OF CONCEPT: Real Azure AI Foundry Native Agent Test             Γòæ
ΓòÜΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓòÉΓò¥

≡ƒôñ Sending test prompt to agent: asst_dgZab8X0Y28EMqKpT9DbwBmb
ΓÅ▒∩╕Å  Timeout: 60 seconds

≡ƒôè Tracing Status: Γ£à ENABLED

ΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöü
PROMPT:
ΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöü
You are an asbestos compliance expert. Please analyze this request:

A manufacturing company built in 1985 has been using asbestos-containing insulation in their facility. 
They want to know: 
1) What are the main health risks?
2) What regulations apply?
3) What immediate actions should they take?

Please provide a brief but comprehensive analysis.

ΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöü
ΓÅ│ Waiting for agent response...
ΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöü

≡ƒº¬ Inline span created in test-real-agent.ts
[foundryAgentClient] [DEBUG] Tracing initialized: true
[foundryAgentClient] [DEBUG] SDK available: false
[foundryAgentClient] [DEBUG] Tracer obtained: Tracer
[foundryAgentClient] [SPAN] agent.ask started
[foundryAgentClient] [SPAN] 'agent.ask' span started
[foundryAgentClient] Γ£¿ Starting agent invocation
[foundryAgentClient]   Agent: asst_dgZab8X0Y28EMqKpT9DbwBmb
[foundryAgentClient]   Timeout: 60000ms
[foundryAgentClient]   Max retries: 3
[foundryAgentClient] Using agent: asst_dgZab8X0Y28EMqKpT9DbwBmb
[foundryAgentClient] Γ£à Agent ID resolved: asst_dgZab8X0Y28EMqKpT9DbwBmb
[foundryAgentClient] [SPAN] attributes set on agent.ask
[foundryAgentClient] ≡ƒôñ Sending request to Azure AI Foundry...
[foundryAgentClient] Invoking native agent via bridge: asst_dgZab8X0Y28EMqKpT9DbwBmb
[foundryAgentClient] Bridge URL: http://127.0.0.1:8001
[foundryAgentClient] Timeout: 60000ms
[foundryAgentClient] Prompt length: 350 characters
[foundryAgentClient] Validating bridge service at http://127.0.0.1:8001...
AzureVmResourceDetector: not running in an Azure VM: connect ENETUNREACH 169.254.169.254:80
[foundryAgentClient] Γ£à Bridge service is healthy
[foundryAgentClient]   Endpoint: https://rsrogers-8077-resource.services.ai.azure.com/api/projects/rsrogers-8077
[foundryAgentClient]   API Version: v1
[foundryAgentClient]   Agents configured: agent1=asst_dgZab8X0Y28EMqKpT9DbwBmb, agent2=asst_oKyLyTufq0RUcImmv4Wordy7, agent3=asst_WfzpVc2VFNSOimWtPFeH2M8A
Exporting 1 span(s). Converting to envelopes...
Exporting 2 envelope(s)
[foundryAgentClient] Γ£à Native agent responded in 10108ms
[foundryAgentClient]   Agent ID (from bridge): asst_dgZab8X0Y28EMqKpT9DbwBmb
[foundryAgentClient]   Response length: 2526 characters
[foundryAgentClient] Γ£à Agent completed successfully
[foundryAgentClient]   CONFIRMED Agent ID: asst_dgZab8X0Y28EMqKpT9DbwBmb
[foundryAgentClient]   Total duration: 10188ms
[foundryAgentClient]   Response length: 2526 characters
[foundryAgentClient] [SPAN] response attributes set
[foundryAgentClient] [SPAN] status OK set
[foundryAgentClient] [SPAN] agent.ask ended (success)
Γ£à AGENT RESPONSE RECEIVED:
ΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöü
Certainly. Here is a professional analysis:

---

**1) Main Health Risks**

- **Asbestosis:** Chronic lung disease caused by inhaling asbestos fibers, leading to lung scarring and impaired breathing.
- **Lung Cancer:** Increased risk, especially for smokers; inhaled fibers can cause malignant changes.
- **Mesothelioma:** Rare but aggressive cancer of the lung or abdominal lining, almost exclusively linked to asbestos exposure.
- **Other Respiratory Diseases:** Pleural plaques, pleural thickening, and benign pleural effusion.

*Health risk is highest through disturbance of asbestos-containing materials (ACMs), releasing fibers into the air.*

---

**2) Applicable Regulations**

**United States (OSHA & EPA):**
- **OSHA Standards:** 29 CFR 1910.1001 (General Industry); mandates exposure monitoring, regulated work practices, medical surveillance, worker training, and labeling requirements.
- **EPA Rules:** National Emission Standards for Hazardous Air Pollutants (NESHAP ΓÇô 40 CFR Part 61, Subpart M); covers demolition, renovation, and disposal.
- **State Laws:** Many states have additional rules and licensing requirements for asbestos abatement and management.

**Elsewhere:**  
- **UK:** Control of Asbestos Regulations 2012
- **EU:** Directive 2009/148/EC

---

**3) Immediate Actions**

**a) Restrict Access & Inform:**  
- Limit access to areas with ACMs.
- Inform workers about asbestos risks and locations.

**b) Survey & Assessment:**  
- Engage a certified asbestos surveyor to identify, assess, and document all ACMs and their condition.

**c) Air Monitoring:**  
- Conduct air quality testing to measure airborne fiber levels.

**d) Risk Management & Planning:**  
- If ACMs are in poor condition or likely to be disturbed, plan for proper remediation/removal by licensed professionals.
- Develop/update an asbestos management plan as required by law.

**e) Compliance & Notification:**  
- Notify regulatory bodies if removal or major remediation is necessary.
- Provide worker training in asbestos awareness.

**f) Medical Surveillance:**  
- Enroll potentially exposed workers in medical surveillance programs.

---

**Summary:**  
Asbestos poses serious health hazards through inhalation, especially if the materials are disturbed. Multiple regulations govern safe handling, monitoring, and abatement. Immediate action should focus on restricting exposure, documentation, compliance, and professional risk management.

If you provide your country or state, further regulatory specifics can be given.
ΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöü

≡ƒôè PROOF OF REAL AGENT USAGE - EFSAGENT:
ΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöüΓöü
Γ£ô Agent ID: asst_dgZab8X0Y28EMqKpT9DbwBmb (EFSAGENT)
Γ£ô Response length: 2526 characters
Γ£ô EFSAGENT JSON Format: Γ¥î NOT VALID JSON
Γ£ô Contains substantive analysis: YES
Γ£ô Mentions asbestos: YES
Γ£ô Discusses health/risks: YES
Γ£ô Is NOT hardcoded mock response: YES

ΓÜá∩╕Å  Response validation failed - check above metrics
   Γ¥î Response is NOT valid JSON (EFSAGENT should respond in JSON format)
≡ƒº¬ Inline span ended

ΓÅ│ Waiting 20 seconds for traces to export (500ms interval with batching)...
Exporting 3 envelope(s)
Exporting 2 span(s). Converting to envelopes...
Exporting 5 envelope(s)
Γ£à Trace wait done

ΓÅ│ Waiting 3 seconds for final flush...
Γ£à Done - traces should now be in Application Insights
